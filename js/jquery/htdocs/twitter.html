<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>jquery sample | Twitterへのリンク(bit.ly APIもつかうよ) - written by tanarky</title>
  <link rel="stylesheet" href="http://yui.yahooapis.com/2.7.0/build/reset-fonts-grids/reset-fonts-grids.css" type="text/css">
  <link rel="stylesheet" href="http://yui.yahooapis.com/2.7.0/build/reset-fonts-grids/reset-fonts-grids.css" type="text/css">
  <link rel="stylesheet" href="http://www.geocities.jp/tanarky/syntaxhighlighter/SyntaxHighlighter.css" type="text/css">
  <link rel="stylesheet" href="./css/common.css" type="text/css">
  <script type="text/javascript"src="http://www.google.com/jsapi"></script>
  <script type="text/javascript">google.load("jquery", "1.3");</script>
  <script type="text/javascript" src="js/jkl-dumper.js"></script>
  <script type="text/javascript" src="http://www.geocities.jp/tanarky/syntaxhighlighter/shCore.js"></script>
  <script type="text/javascript" src="http://www.geocities.jp/tanarky/syntaxhighlighter/shBrushXml.js"></script>
</head>
  <body>
    <div id="doc2" class="yui-t4">
      <div id="hd">
        <br>
      </div>
      <div id="bd">
        <div id="yui-main">
          <div class="yui-b">
            <div class="yui-g">
              <h1>jquery sample | Twitterへのリンク(bit.ly APIもつかうよ) - written by tanarky</h1>
    <div id="twitter"></div>
<script>
$(document).ready(function() {
    // custom start
    var parts_id  = 'twitter';
    var button_id = 'tweetthis';
    //var icon_url  = "http://www.geocities.jp/tanarky/jquery/js/blogparts/imgs/twitter_icon.gif";
    var icon_url  = "http://i.yimg.jp/images/commerce/js/blogparts/twitter/1.0.0/tweetthis-teal.png";
    var front_mes = '';
    var back_mes  = '';
    // custom end
    // definition start
    var t = "http://twitter.com/home?status=";
    var b = 'http://api.bit.ly/shorten';
    var l = 'tanarky';
    var a = 'R_e0cbd9274f2301ce3f0bc62e45b975f7';
    // definition end

    // <div>Twitする：</div><img src="icon"></img><div>外部</div>
    var id = '#' + parts_id;
    $(id).append($('<p>').text(front_mes));
    //$(id).append($('<a>').attr({id:button_id,style:"cursor:pointer",target:"_blank"}).html($('<img>').attr({border:0,src:icon_url})));
    $(id).append($('<img>').attr({src:icon_url, id:button_id, style:"cursor:pointer"}));
    $(id).append($('<p>').text(back_mes));

    $('#'+button_id).click(function(e){
        $.ajax({
            url : b,
            dataType : "jsonp",
            data : {
                version:'2.0.1',
                format:'json',
                login:l,
                apiKey:a,
                longUrl:location.href
            },
            success : function(r){
                //console.log((new JKL.Dumper()).dump(r));
                var x = $('h1').get(0);
                var p = r.results[location.href]['shortUrl'];
                var rt = 'RT - '+x.innerHTML+' '+p;
                //location.href = t + rt;
                window.open(t+rt, '_ttt');
                return false;
            },
            error : function(){console.log('failed')}
        });
    });
});
</script>

            </div>
          </div>
        </div>
        <div class="yui-b">
        </div>
      </div>
      <div id="ft"><p style="text-align:center;margin-top:10px">Copyright (C) 2009 tanarky All Rights Reserved.</p>
      </div>
    </div>
  </body>
</html>
